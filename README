pgshark.pl
    pgshark.pl - Messing with PostgreSQL network traffic

SYNOPSIS
    pgshark.pl --help
    pgshark.pl [--debug] [--read file] {--output plugin_name}
      Where plugin_name could be *sql* or *normalize* or *debug* or
      *fouine*.

DESCRIPTION
    This program study PostgreSQL traffic captured from the network and is
    able to make various things with it. The network dump could be live or
    from a pcap file (usingtcpdump as instance).

    pgshark comes with various output plugins able to do various things with
    these network dumps.

    -d, --debug
      Print debug informations to the standart error. The more you repeat
      this option, the more pgshark will be verbose. There is 3 level of
      debug presently.

    --help
      Show this help message and exit.

    -h, --host <ip address>
      Gives the IP address of the PostgreSQL server. By default, set to
      127.0.0.1.

    --i, --interface <interface name>
      Capture PostgreSQL traffic directly from the given network interface.
      Conflict with --read. By default, pgshark will read from stdin if
      neither --read or --interface are given.

    -o, --output <plugin name>
      Select the dump processing output plugin. This parameter value is
      case-insensitive (eg. SQL, Sql and sql will all select the SQL plugin
      output). See section "PLUGINS".

    -p, --port <port>
      Gives the port the PostgreSQL backend is listening on. Be default, set
      to 5432

    -r, --read <path to file>
      Read PostgreSQL traffic from given pcap file. Conflict with
      --interface. By default, pgshark will read from stdin if neither
      --read or --interface are given.

PLUGINS
    sql
      The sql plugin write captured queries on stdout. Because of limitation
      of SQL language it doesn't support unnamed prepared statement, so it
      actually name them.

      Presently, this plugin doesn't support cursors.

    normalize
      The normalize plugin will try to normalize queries and prepared
      queries and output them to stdoud. It aims to give you a list of
      unique queries, however the number of time they has been send by
      clients and whatever their parameters were.

    debug
      The debug plugin will output the PostgreSQL messages in human readable
      format. Usefull to analyze what is in a network dump before using
      pgshark on some other duties.

    fouine
      The fouine plugin will output a report with most popular queries,
      slowest cumulatives ones, slowest queries ever, classification of
      queries by types, etc.

EXAMPLES
    "cat some_capture.pcap* | pgshark.pl --output SQL"
      Output all queries found in files "some_capture.pcap*" in SQL to the
      standart output.

    "pgshark.pl --output SQL -r some_capture.pcap001"
      Output all queries found in file "some_capture.pcap001" in SQL to the
      standart output.

    "pgshark.pl --output normalize -i eth0"
      Capture PostgreSQL traffic from interface eth0 and output normalized
      queries to the standart output.

AUTHORS
    Jehan-Guillaume (ioguix) de Rorthais, jgdr at dalibo dot com.

    Dalibo's team.

    http://www.dalibo.org

SEE ALSO
    The pgShark wiki on github : https://github.com/dalibo/pgshark/wiki

LICENSING
    This program is open source, licensed under the simplified BSD license.
    For license terms, see the LICENSE provided with the sources.

